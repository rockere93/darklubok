(()=>{"use strict";var t={133:(t,n,e)=>{t.exports=e.p+"assets/d7d95763a796efe1ea98.png"},66:(t,n,e)=>{t.exports=e.p+"assets/eabd42a6254254e38c8b.png"}},n={};function e(o){var a=n[o];if(void 0!==a)return a.exports;var r=n[o]={exports:{}};return t[o](r,r.exports,e),r.exports}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var o=n.getElementsByTagName("script");if(o.length)for(var a=o.length-1;a>-1&&!t;)t=o[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),(()=>{const t=function(t,n){t.classList.contains("animationText")&&t.classList.remove("animationText"),setTimeout((()=>t.classList.add("animationText")),n)},n=function(t,n,...e){const o=document.createElement("div");return o.classList.add("button"),o.textContent=`${t}`,o.addEventListener("click",(function(){n(...e)})),o},o=document.querySelector(".body"),a=document.querySelector(".buttons_block"),r=document.querySelector(".mainfield"),i=document.querySelector(".textCard"),u=document.querySelector(".mainfield__body"),c=document.querySelector(".viewport"),s=function(e,o){t(u,1e3),i.innerHTML=` ${e[o].text}`,a.innerHTML=" ";const r=e[o].buttons;for(const o of r){let r,i=[];o.arg&&(i=o.arg),r="goToStoryCard"===o.functionButton.name?n(o.nameButton,o.functionButton,e,...i):n(o.nameButton,o.functionButton,...i),a.append(r),t(a,2e3)}t(a,2e3)},d=function(t,n){const e=t+Math.random()*(n+1-t);return Math.floor(e)},m={name:"",gender:"",inventory:[],maxhealth:35,health:35,attacks:[{name:"Удар рукой",get damagePoints(){return this._damage=d(0,5),this._damage},get text(){return 0===this._damage?"Вы промахнулись":`Вы тыкаете кулаком по противнику. Он получает ${this._damage} урона`}},{name:"Пинок",get damagePoints(){return this._damage=d(0,5),this._damage},get text(){return 0===this._damage?"Вы промахнулись":`Удар ногой наносит ${this._damage} урона`}}]},g=function(t,n){const e=t.findIndex((t=>t.nameButton===n));e>-1&&t.splice(e,1)};function l(e,o){if(h(o,e,d(0,o.attacks.length-1)),function(){const t=document.querySelector(".player-info__health__bar");document.querySelector(".player-info__health__text").textContent=m.health+"/"+m.maxhealth,t.style.width=Math.floor(m.health/m.maxhealth*100)+"%"}(),e.health<=0){const e=o.buttonsDefeat;for(const o of e){let e=[];const r=n(o.nameButton,o.functionButton,...e);o.arg&&(e=o.arg),a.append(r),t(a,3e3)}}else for(let r=0;r<e.attacks.length;r++){const i=n(e.attacks[r].name,f,e,o,r);a.append(i),t(a,3e3)}}function f(e,o,r){if(h(e,o,r),o.health<=0){a.innerHTML=" ";const e=o.buttonsWin;for(const o of e){let e,r=[];o.arg&&(r=o.arg),o.functionButton.name,e=n(o.nameButton,o.functionButton,...r),a.append(e),t(a,3e3)}}else a.innerHTML=" ",l(e,o)}function h(n,e,o){e.health-=n.attacks[o].damagePoints;let a=document.createElement("p");a.textContent=`${n.attacks[o].text}. Осталось здоровья: ${e.health}`,a.classList.add("fightString","_opacityZero"),i.append(a),a=u.querySelector(".textCard > p:last-child"),t(a,1e3)}const p=[{name:"storyCard0",get text(){return"Ты находишься в темной бревенчатой комнате, единственный свет - из узкого, как бойница, окна, через который видно краешек серой хмари. В нос бьет сильный запах плесени и влажного мха, который утыкан между старыми потемневшими брёвнами. По центру стоит печь, достаточно большая, чтобы туда поместился человек, но чья кладка рассыпается как будто прямо на глазах, обнажая тёмное и пугающее нутро. Возле стен свалены кучи какого-то хлама. Также видна массивная дверь, неровно примыкающая к косяку."},buttons:[{nameButton:"Оглядеться",functionButton:L,arg:[1]},{nameButton:"Осмотреть печь",functionButton:L,arg:[3]},{nameButton:"Подойти к двери",functionButton:L,arg:[6]}]},{name:"storyCard1",get text(){return"Вы старательно осматриваете комнату, но видите только кучи разломанной деревянной мебели и посуды, какие-то ржавые куски металла. Ничего полезного. Ваше внимание привлекает только обрушившийся со стены шкафчик, закиданный всяким хламом."},buttons:[{nameButton:"Попытаться открыть дверь шкафчика",functionButton:function(){g(p[0].buttons,"Оглядеться"),B(y),s(p,2)}},{nameButton:"Осмотреть печь",functionButton:L,arg:[3]},{nameButton:"Подойти к двери",functionButton:L,arg:[6]}]},{name:"storyCard2",get text(){return"Вы неловко откидываете хлам, мешающий открыть дверцы. И отворачиваете одну створку. Внутри, видимо, хранилась посуда, которая сейчас из себя представляет лишь глиняные черепки. Немного покопавшись вы натыкаетесь на небольшой нож, старый, выщербленный, с перемотанным полосками кожи деревянной ручкой."},buttons:[{nameButton:"Осмотреть печь",functionButton:L,arg:[3]},{nameButton:"Подойти к двери",functionButton:L,arg:[6]}]},{name:"storyCard3",get text(){return"Когда вы подходите ближе к печи, вы ощущаете липкое чувство страха в груди, руки начинают непроизвольно дрожать, но вы пересиливаете себя и опускаете руки в утробу печи. Она полна пепла, всё глубже погружая в него руки, вы нащупываете твердые фрагменты неровной формы, как крупные, так и совсем небольшие, а также какой-то небольшой гладкий и округлый предмет."},buttons:[{nameButton:"Вытащить округлый предмет",functionButton:function(){g(p[3].buttons,"Вытащить округлый предмет"),s(p,4),B(x)}},{nameButton:"Вытащить фрагменты неровной формы",functionButton:b},{nameButton:"Уйти от печи",functionButton:L,arg:[0]}]},{name:"storyCard4",get text(){return"Слишком темно, чтобы разглядеть. Вы подходите к окну и видите, что держите в руках простой медальон. Он хоть и немного оплавлен, но на нём еще можно разглядеть именную надпись «Алёна». Предмет попадает к вам в инвентарь."},buttons:[{nameButton:"Вытащить фрагменты неровной формы",functionButton:b},{nameButton:"Уйти от печи",functionButton:L,arg:[0]}]},{name:"storyCard5",get text(){return"Чтобы разглядеть, что у вас в руках, вы подходите к окошку. При тусклом свете от окна вы понимаете, что держите в руках фрагменты костей и человеческие зубы, вы с ужасом роняете их на пол. Вы не можете заставить себя снова вернуться к печи."},buttons:[{nameButton:"Продолжить",functionButton:L,arg:[0]}]},{name:"storyCard6",get text(){return"Массивная и тяжелая дверь перекосилась, оставляя узкие щели, через которые проникает слабый свет. Петель уже нет, разбухшую от влаги дверь просто вбили в старый косяк. На улице за дверью слышно странное шипение, перемежающее другими резкими и неприятными звуками, а также хлопанье массивных крыльев."},buttons:[{nameButton:"Попытаться открыть дверь",functionButton:function(){g(p[6].buttons,"Попытаться открыть дверь"),s(p,7)}},{nameButton:"Разбежаться и попытаться выбить дверь наружу",functionButton:v},{nameButton:"Отойти от двери",functionButton:L,arg:[0]}]},{name:"storyCard7",get text(){return"Вы дергаете дверь за чудом сохранившуюся ручку. Чуду конец, ручка остается у вас в руках. Вы пробуете толкнуть дверь, она немного поддаётся."},buttons:[{nameButton:"Разбежаться и попытаться выбить дверь наружу",functionButton:v},{nameButton:"Отойти от двери",functionButton:L,arg:[0]}]}],_=[{name:"storyCard0",get text(){return"Дверь поддается и вылетает из проёма, падая с крыльца на землю. Первое, что вы видите: это старые огромные деревья в паре десятков метрах от вас. Второе: жухлую траву, кое-как пробивающуюся через слой опавшей листвы. Третье вы предпочли бы не видеть, но оно здесь: большая птица размером с небольшого осла. Шея делает её похожей на лебедя, но длина непропорционально большая и извивается она скорее по-змеиному. Тварь издаёт угрожающее шипение, похожее на гусиное. Что-то подсказывает вам, что она настроена недружелюбно."},buttons:[{nameButton:"Продолжить",functionButton:function(t,n){u.classList.remove("_opacityZero"),i.innerHTML=" ",a.innerHTML=" ";const e=document.createElement("div");e.classList.add("fightHead"),e.textContent="БОЙ",c.prepend(e),l(t,n)},arg:[m,{name:"Гусь-лебедь",img:"",description:"",health:10,attacks:[{name:"щипок",get damagePoints(){return this._damage=d(0,5),this._damage},get text(){return 0===this._damage?"Гусь промахнулся":`Гусь-лебедь, словно змея, резко выбросил свою головув и сильно ущипнул вас. Получено ${this._damage} урона`}},{get text(){return 0===this._damage?"Гусь промахнулся":`Гусь-лебедь привстает на лапах и начинает хлестать вас своими крыльями. Вы получаете ${this._damage} урона`},get damagePoints(){return this._damage=d(0,5),this._damage}},{name:"удар в полете",get text(){return 0===this._damage?"Гусь промахнулся":`Взлетев перед вами, он обрушивает всю мощь своих перепончатых лап, раздирая вашу кожу. Вы получаете ${this._damage} урона`},get damagePoints(){return this._damage=d(0,5),this._damage}}],buttonsDefeat:[{nameButton:"Начать заново",functionButton:function(){location.reload()}}],buttonsWin:[{nameButton:"Продолжить",functionButton:function(){s(_,0)}}]}]}]}],B=function(t){if(m.inventory.push(t),t.weaponAttaсks)for(const n of t.weaponAttaсks)m.attacks.push(n);const n=document.querySelector(".character-window__inventory"),e=document.createElement("div"),o=document.createElement("img"),a=document.createElement("div");e.classList.add("inventory__item-block"),o.src=t.img,e.append(o),a.classList.add("inventory__item-description"),a.textContent=t.description,e.append(a),n.append(e)},y={name:"Старый кухонный нож",description:"Небольшой нож с выщербленным лезвием и перемотанной полосками кожи деревянной ручкой.",img:e(66),weaponAttaсks:[{name:"Ударить кухонным ножом",get damagePoints(){return this._damage=d(0,5),this._damage},get text(){return 0===this._damage?"ВЫ промахнулись":`Вы бьете ножом, как умеете и наносите ${this._damage} урона`}},{name:"Порез ножом",get damagePoints(){return this._damage=d(0,5),this._damage},get text(){return 0===this._damage?"ВЫ промахнулись":`Вы попали, но выщербленное лезвие слегка ранит противника на ${this._damage} урона`}}]},x={name:"Старый кухонный нож",description:'Простой, слегла оплавленный медальон с нацарапанной надписью "Алёна"',img:e(133)};function b(){g(p[0].buttons,"Осмотреть печь"),g(p[1].buttons,"Осмотреть печь"),g(p[2].buttons,"Осмотреть печь"),s(p,5)}function v(){s(_,0)}function L(){s(p,...arguments)}function k(t){m.gender=t,s(C,1),function(){const t=document.createElement("input");t.id="inputName",t.placeholder="Нажмите сюда, чтобы ввести имя",a.prepend(t),t.addEventListener("keydown",(function(t){"Enter"===t.code&&w()}))}()}function w(){const t=a.querySelector("input");""===t.value&&t.classList.contains("empty")?function(){function t(t){a.querySelector("input").style.paddingLeft=t}t("5px"),setTimeout(t,50,"0px"),setTimeout(t,100,"5px"),setTimeout(t,150,"0px")}():""===t.value?t.classList.add("empty"):(m.name=t.value,s(C,2),r.classList.contains("dark_animation")||setTimeout((()=>r.classList.add("dark_animation")),2e3),o.classList.add("dark"))}const C=[{name:"introCard0",get text(){return"Приветствую тебя, добрый молодец! Али ты девица красная? Подслеповат я к старости стал, уж не серчай на старика."},buttons:[{nameButton:"Добрый молодец",functionButton:k,arg:["Добрый молодец"]},{nameButton:"Красна девица",functionButton:k,arg:["Красна девица"]}]},{name:"introCard1",get text(){return`${m.gender} значит. Ну а зовут-то тебя как?`},buttons:[{nameButton:"Подтвердить",functionButton:w}]},{name:"introCard2",get text(){return`${m.name}, ну что ж. В общем, здесь на лубочно-клюквенном языке мы и закончим. Это тебе не сказка и даже не быль. Это кошмар, в котором тебе не повезло оказаться.`},buttons:[{nameButton:"Продолжить",functionButton:function(){o.className="body body_theme_ch1-p1",r.className="mainfield mainfield_theme_ch1-p1 _opacityZero",u.className="mainfield__body mainfield__body_theme_ch1-p1 _opacityZero",t(r,3e3),s(p,0)}}]}];(function(){const t=document.querySelector(".character-window");document.querySelector(".sideMenu__button, .character").addEventListener("click",(function(){!function(t){function n(o){"Escape"!==o.code&&1!==o.pointerId&&0!==o.pointerId||(t.classList.add("hidden"),document.removeEventListener("keydown",n),e.removeEventListener("click",n))}t.classList.remove("hidden"),document.addEventListener("keydown",n);const e=t.querySelector(".button__closed");e.addEventListener("click",n)}(t)}))})(),s(C,0)})()})();